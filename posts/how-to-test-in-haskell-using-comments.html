<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/2aaf0723e720e8b9-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/7c7d6f40684b2ac8.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-1b4cf0d9e5fb4de4.js" as="script"/><link rel="preload" href="/_next/static/chunks/fd9d1056-8f577882d323fba9.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-0e51abbae42a9666.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-app-506360e78355169f.js" as="script"/><link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=G-NTMPZXFZ7E"/><title>How to test in Haskell using comments? | Waqas Ali</title><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><link rel="apple-touch-icon" href="/apple-icon.png?98e0ab4deecdb1ce" type="image/png" sizes="180x180"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_20951f"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><main class="flex min-h-screen flex-col gap-4 py-11 px-5 max-w-2xl mx-auto"><div class="flex flex-row justify-between items-center"><a class="flex flex-row items-center gap-4" href="/"><img alt="Waqas Ali Portrait" loading="lazy" width="1064" height="1064" decoding="async" data-nimg="1" class="inline-block h-16 w-16 rounded-full" style="color:transparent" src="/_next/static/media/portrait.b59fed9e.jpg"/><h1 class="text-2xl font-bold leading-7 sm:truncate sm:text-3xl sm:tracking-tight">Waqas Ali</h1></a></div><div class="flex flex-row flex-wrap gap-x-2 items-center"><a href="/"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-4"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"></path></svg></a><span>|</span><a href="/assets/docs/resume.pdf">Resume</a></div><div class="flex-1"><div class="flex flex-col"><h1 class="text-2xl font-bold">How to test in Haskell using comments?</h1><h3 class="mt-2">March 12, 2020</h3><hr class="border-gray-300 dark:border-gray-700 my-4"/><article class="prose dark:prose-invert"><p>If you want to easily test your functions in Haskell, you can do so by writing inputs and their expected responses right above your functions as comments. All you need is <a href="https://github.com/sol/doctest">doctest</a>.</p>
<p>This is how:</p>
<h3>1. Setup Project</h3>
<p>Let&#x27;s setup a basic project first.</p>
<ol>
<li>
<p>Install <a href="https://docs.haskellstack.org/en/stable/README/#how-to-install">Haskell Stack</a> if you don&#x27;t have it already.</p>
</li>
<li>
<p>Setup project and install required dependencies.</p>
</li>
</ol>
<pre><code>stack new my-project
cd my-project
stack setup
</code></pre>
<ol start="3">
<li>Build and execute project. If you see <code>someFunc</code> in the output you are good to go.</li>
</ol>
<pre><code>stack build
stack exec my-project-exe
</code></pre>
<img alt="Output after running `stack build` and `stack exec my-project-exe`" loading="lazy" width="1928" height="928" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/stack_build_exec.15a9f02f.png"/>
<h3>2. Write a function</h3>
<p>Let&#x27;s write a simple function so we can test it.</p>
<ol>
<li>Create a file <code>Math.hs</code> in <code>src</code> with a <code>square</code> function:</li>
</ol>
<pre><code>module Math where

square :: Int -&gt; Int
square x = x * x
</code></pre>
<ol start="2">
<li>
<p>Manually test the function in <a href="https://wiki.haskell.org/GHC/GHCi">GHCi</a>. Load up the interactive environment using <code>stack ghci</code>.</p>
</li>
<li>
<p>Try out the function to see everything is working as expected: <code>Math.square 3</code> should output <code>9</code>.</p>
</li>
</ol>
<img alt="Testing our square function" loading="lazy" width="1914" height="566" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/stack_ghci.d9d52330.png"/>
<h3>3. Write tests</h3>
<p>Now let&#x27;s get to the actual testing. All we need to do to is write comments.</p>
<ol>
<li>Just above your function definition, write your set of inputs and their expected outputs. This is how my <code>Math.hs</code> looks like:</li>
</ol>
<pre><code>module Math where

-- | Square numbers
--
-- Examples:
--
-- &gt;&gt;&gt; square 3
-- 9
--
-- &gt;&gt;&gt; square (-1)
-- 1
square :: Int -&gt; Int
square x = x * x
</code></pre>
<ol start="2">
<li>If you try running <code>stack test</code> you will notice these tests don&#x27;t run. That&#x27;s because we haven&#x27;t set up <code>doctest</code> yet.</li>
</ol>
<h3>4. Configure Project for doctest</h3>
<ol>
<li>First, let&#x27;s add <code>doctest</code> to our project. Go to the end of <code>package.yaml</code> and add it as dependency of <code>my-project-test</code>. This is how my <code>package.yaml</code> looks like:</li>
</ol>
<pre><code>name:                my-project
version:             0.1.0.0
github:              &quot;githubuser/my-project&quot;
license:             BSD3
author:              &quot;Author name here&quot;
maintainer:          &quot;example@example.com&quot;
copyright:           &quot;2020 Author name here&quot;

extra-source-files:
- README.md
- ChangeLog.md

# Metadata used when publishing your package
# synopsis:            Short description of your package
# category:            Web

# To avoid duplicated efforts in documentation and dealing with the
# complications of embedding Haddock markup inside cabal files, it is
# common to point users to the README.md file.
description:         Please see the README on GitHub at &lt;https://github.com/githubuser/my-project#readme&gt;

dependencies:
- base &gt;= 4.7 &amp;&amp; &lt; 5

library:
  source-dirs: src

executables:
  my-project-exe:
    main:                Main.hs
    source-dirs:         app
    ghc-options:
    - -threaded
    - -rtsopts
    - -with-rtsopts=-N
    dependencies:
    - my-project

tests:
  my-project-test:
    main:                Spec.hs
    source-dirs:         test
    ghc-options:
    - -threaded
    - -rtsopts
    - -with-rtsopts=-N
    dependencies:
    - my-project
    - doctest
</code></pre>
<ol start="2">
<li>To install the dependency, run <code>stack test</code>. If the installation goes well, you should see the following message <code>Test suite not yet implemented</code>.</li>
</ol>
<img alt="Test suite not implemented" loading="lazy" width="1932" height="873" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/stack_test_1.ff44caa8.png"/>
<p>If you go to the actual test file in <code>test/Spec.hs</code> you can see that there indeed are no tests. We need to somehow tell stack to look for tests in our <code>src</code> files instead.</p>
<ol start="3">
<li>To do that, clear the contents of <code>test/Spec.hs</code> file and replace it with this:</li>
</ol>
<pre><code>import Test.DocTest

main = doctest [&quot;-isrc&quot;, &quot;src/Math.hs&quot;]
</code></pre>
<ol start="4">
<li>Now, if you run <code>stack test</code> it will run the 2 tests we wrote earlier. That&#x27;s it, we are done!</li>
</ol>
<img alt="Tests pass successfully" loading="lazy" width="1930" height="1142" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/stack_test_2.ece830df.png"/>
<p>When you add more modules, simply add them to this list <code>[&quot;-isrc&quot;, &quot;src/Math.hs&quot;]</code> in <code>test/Spec.hs</code> to make <code>doctest</code> look for tests in them.</p>
<h3>Note</h3>
<p>This was my setup while writing this:</p>
<ul>
<li>MacOS <code>10.15.3</code></li>
<li>Haskell Stack <code>2.1.3</code></li>
</ul></article></div></div><footer class="flex mt-1 justify-center items-center text-xs gap-x-1 "><span>#9675b9e
</span><span class="text-gray-300 dark:text-gray-700">|</span><span>Last Updated: 15 July 2021</span><span class="text-gray-300  dark:text-gray-700">|</span><span>© <!-- -->2023</span></footer></main><script src="/_next/static/chunks/webpack-1b4cf0d9e5fb4de4.js" async=""></script><script src="/_next/static/chunks/fd9d1056-8f577882d323fba9.js" async=""></script><script src="/_next/static/chunks/596-0e51abbae42a9666.js" async=""></script><script src="/_next/static/chunks/main-app-506360e78355169f.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/2aaf0723e720e8b9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/7c7d6f40684b2ac8.css\",{\"as\":\"style\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-1b4cf0d9e5fb4de4.js\",\"971:static/chunks/fd9d1056-8f577882d323fba9.js\",\"596:static/chunks/596-0e51abbae42a9666.js\"],\"name\":\"default\",\"async\":false}\n6:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-1b4cf0d9e5fb4de4.js\",\"971:static/chunks/fd9d1056-8f577882d323fba9.js\",\"596:static/chunks/596-0e51abbae42a9666.js\"],\"name\":\"GlobalError\",\"async\":false}\n7:I{\"id\":8672,\"chunks\":[\"222:static/chunks/222-b40b1e9e671978b9.js\",\"685:static/chunks/685-6d753d088981925e.js\","])</script><script>self.__next_f.push([1,"\"879:static/chunks/879-61a9b94f529037d2.js\",\"185:static/chunks/app/layout-8a9e88b51fb1bfca.js\"],\"name\":\"ClientScripts\",\"async\":false}\n8:I{\"id\":4129,\"chunks\":[\"222:static/chunks/222-b40b1e9e671978b9.js\",\"685:static/chunks/685-6d753d088981925e.js\",\"879:static/chunks/879-61a9b94f529037d2.js\",\"185:static/chunks/app/layout-8a9e88b51fb1bfca.js\"],\"name\":\"Providers\",\"async\":false}\n9:I{\"id\":6685,\"chunks\":[\"222:static/chunks/222-b40b1e9e671978b9.js\",\"685:static/chunks/685-6d753d088981925e.js\",\"991:static/chunks/app/p"])</script><script>self.__next_f.push([1,"osts/page-1bf624d634bc2b9a.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":3222,\"chunks\":[\"222:static/chunks/222-b40b1e9e671978b9.js\",\"562:static/chunks/app/posts/how-to-test-in-haskell-using-comments/page-5ecb2c3c7376d47d.js\"],\"name\":\"Image\",\"async\":false}\nb:I{\"id\":7238,\"chunks\":[\"222:static/chunks/222-b40b1e9e671978b9.js\",\"685:static/chunks/685-6d753d088981925e.js\",\"879:static/chunks/879-61a9b94f529037d2.js\",\"185:static/chunks/app/layout-8a9e88b51fb1bfca.js\"],\"name\":\"ToggleTheme\",\"async\":false}\nc:I{\"id\":7767,\"chun"])</script><script>self.__next_f.push([1,"ks\":[\"272:static/chunks/webpack-1b4cf0d9e5fb4de4.js\",\"971:static/chunks/fd9d1056-8f577882d323fba9.js\",\"596:static/chunks/596-0e51abbae42a9666.js\"],\"name\":\"default\",\"async\":false}\nd:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-1b4cf0d9e5fb4de4.js\",\"971:static/chunks/fd9d1056-8f577882d323fba9.js\",\"596:static/chunks/596-0e51abbae42a9666.js\"],\"name\":\"default\",\"async\":false}\ne:T4b5,"])</script><script>self.__next_f.push([1,"name:                my-project\nversion:             0.1.0.0\ngithub:              \"githubuser/my-project\"\nlicense:             BSD3\nauthor:              \"Author name here\"\nmaintainer:          \"example@example.com\"\ncopyright:           \"2020 Author name here\"\n\nextra-source-files:\n- README.md\n- ChangeLog.md\n\n# Metadata used when publishing your package\n# synopsis:            Short description of your package\n# category:            Web\n\n# To avoid duplicated efforts in documentation and dealing with the\n# complications of embedding Haddock markup inside cabal files, it is\n# common to point users to the README.md file.\ndescription:         Please see the README on GitHub at \u003chttps://github.com/githubuser/my-project#readme\u003e\n\ndependencies:\n- base \u003e= 4.7 \u0026\u0026 \u003c 5\n\nlibrary:\n  source-dirs: src\n\nexecutables:\n  my-project-exe:\n    main:                Main.hs\n    source-dirs:         app\n    ghc-options:\n    - -threaded\n    - -rtsopts\n    - -with-rtsopts=-N\n    dependencies:\n    - my-project\n\ntests:\n  my-project-test:\n    main:                Spec.hs\n    source-dirs:         test\n    ghc-options:\n    - -threaded\n    - -rtsopts\n    - -with-rtsopts=-N\n    dependencies:\n    - my-project\n    - doctest\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/7c7d6f40684b2ac8.css\",\"precedence\":\"next\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"Oeft3AwcGQMISXh_Vmzsm\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/how-to-test-in-haskell-using-comments\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[\"how-to-test-in-haskell-using-comments\",{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L5\",\"globalErrorComponent\":\"$6\",\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"$L7\",null,{}],[\"$\",\"body\",null,{\"className\":\"__className_20951f\",\"children\":[\"$\",\"$L8\",null,{\"children\":[\"$\",\"main\",null,{\"className\":\"flex min-h-screen flex-col gap-4 py-11 px-5 max-w-2xl mx-auto\",\"children\":[[[\"$\",\"div\",null,{\"className\":\"flex flex-row justify-between items-center\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"className\":\"flex flex-row items-center gap-4\",\"children\":[[\"$\",\"$La\",null,{\"alt\":\"Waqas Ali Portrait\",\"src\":{\"src\":\"/_next/static/media/portrait.b59fed9e.jpg\",\"height\":1064,\"width\":1064,\"blurDataURL\":\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABAEBAAAAAAAAAAAAAAAAAAAAA//aAAwDAQACEAMQAAAAtBp//8QAHBAAAwABBQAAAAAAAAAAAAAAAQIDAAUGEhNS/9oACAEBAAE/AG3LGeoVshd0D9AmacQw9gZ//8QAGBEAAgMAAAAAAAAAAAAAAAAAAAECA1H/2gAIAQIBAT8AdcVp/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAS/9oACAEDAQE/ANLf/9k=\",\"blurWidth\":8,\"blurHeight\":8},\"className\":\"inline-block h-16 w-16 rounded-full\"}],[\"$\",\"h1\",null,{\"className\":\"text-2xl font-bold leading-7 sm:truncate sm:text-3xl sm:tracking-tight\",\"children\":\"Waqas Ali\"}]]}],[\"$\",\"$Lb\",null,{}]]}],[\"$\",\"div\",null,{\"className\":\"flex flex-row flex-wrap gap-x-2 items-center\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"strokeWidth\":1.5,\"stroke\":\"currentColor\",\"aria-hidden\":\"true\",\"aria-labelledby\":\"$undefined\",\"className\":\"w-4\",\"children\":[null,[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"d\":\"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25\"}]]}]}],[\"$\",\"span\",null,{\"children\":\"|\"}],[\"$\",\"$L9\",null,{\"href\":\"/assets/docs/resume.pdf\",\"children\":\"Resume\"}],[]]}]],[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Ld\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold\",\"children\":\"Not Found\"}],[\"$\",\"p\",null,{\"children\":\"You just hit a route that doesn't exist... the sadness.\"}]]}],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Ld\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"how-to-test-in-haskell-using-comments\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Ld\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[[\"$\",\"div\",null,{\"className\":\"flex flex-col\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-2xl font-bold\",\"children\":\"How to test in Haskell using comments?\"}],[\"$\",\"h3\",null,{\"className\":\"mt-2\",\"children\":\"March 12, 2020\"}],[\"$\",\"hr\",null,{\"className\":\"border-gray-300 dark:border-gray-700 my-4\"}],[\"$\",\"article\",null,{\"className\":\"prose dark:prose-invert\",\"children\":[[\"$\",\"p\",null,{\"children\":[\"If you want to easily test your functions in Haskell, you can do so by writing inputs and their expected responses right above your functions as comments. All you need is \",[\"$\",\"a\",null,{\"href\":\"https://github.com/sol/doctest\",\"children\":\"doctest\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This is how:\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"1. Setup Project\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Let's setup a basic project first.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Install \",[\"$\",\"a\",null,{\"href\":\"https://docs.haskellstack.org/en/stable/README/#how-to-install\",\"children\":\"Haskell Stack\"}],\" if you don't have it already.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"Setup project and install required dependencies.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"stack new my-project\\ncd my-project\\nstack setup\\n\"}]}],\"\\n\",[\"$\",\"ol\",null,{\"start\":\"3\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Build and execute project. If you see \",[\"$\",\"code\",null,{\"children\":\"someFunc\"}],\" in the output you are good to go.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"stack build\\nstack exec my-project-exe\\n\"}]}],\"\\n\",[\"$\",\"$La\",null,{\"src\":{\"src\":\"/_next/static/media/stack_build_exec.15a9f02f.png\",\"height\":928,\"width\":1928,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAVklEQVR42g2MsQ0AIQwDST4UbMBs7F/QAwJCCO/Gkk+6o1LKnPPeG0Jg5rXWGANXRL4YY621925m7z1QdxfmL6WUcz7ntNZUFeremz0YEEQiwqIGqqo/eJM4PH9k5gEAAAAASUVORK5CYII=\",\"blurWidth\":8,\"blurHeight\":4},\"alt\":\"Output after running `stack build` and `stack exec my-project-exe`\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"2. Write a function\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Let's write a simple function so we can test it.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Create a file \",[\"$\",\"code\",null,{\"children\":\"Math.hs\"}],\" in \",[\"$\",\"code\",null,{\"children\":\"src\"}],\" with a \",[\"$\",\"code\",null,{\"children\":\"square\"}],\" function:\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"module Math where\\n\\nsquare :: Int -\u003e Int\\nsquare x = x * x\\n\"}]}],\"\\n\",[\"$\",\"ol\",null,{\"start\":\"2\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Manually test the function in \",[\"$\",\"a\",null,{\"href\":\"https://wiki.haskell.org/GHC/GHCi\",\"children\":\"GHCi\"}],\". Load up the interactive environment using \",[\"$\",\"code\",null,{\"children\":\"stack ghci\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Try out the function to see everything is working as expected: \",[\"$\",\"code\",null,{\"children\":\"Math.square 3\"}],\" should output \",[\"$\",\"code\",null,{\"children\":\"9\"}],\".\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"$La\",null,{\"src\":{\"src\":\"/_next/static/media/stack_ghci.d9d52330.png\",\"height\":566,\"width\":1914,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAAAAABA/8IxAAAAGklEQVR42mOIi4nw93K21GcIdbdytLe10QIAKkgEUMJquCkAAAAASUVORK5CYII=\",\"blurWidth\":8,\"blurHeight\":2},\"alt\":\"Testing our square function\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"3. Write tests\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Now let's get to the actual testing. All we need to do to is write comments.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Just above your function definition, write your set of inputs and their expected outputs. This is how my \",[\"$\",\"code\",null,{\"children\":\"Math.hs\"}],\" looks like:\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"module Math where\\n\\n-- | Square numbers\\n--\\n-- Examples:\\n--\\n-- \u003e\u003e\u003e square 3\\n-- 9\\n--\\n-- \u003e\u003e\u003e square (-1)\\n-- 1\\nsquare :: Int -\u003e Int\\nsquare x = x * x\\n\"}]}],\"\\n\",[\"$\",\"ol\",null,{\"start\":\"2\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"If you try running \",[\"$\",\"code\",null,{\"children\":\"stack test\"}],\" you will notice these tests don't run. That's because we haven't set up \",[\"$\",\"code\",null,{\"children\":\"doctest\"}],\" yet.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"4. Configure Project for doctest\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"First, let's add \",[\"$\",\"code\",null,{\"children\":\"doctest\"}],\" to our project. Go to the end of \",[\"$\",\"code\",null,{\"children\":\"package.yaml\"}],\" and add it as dependency of \",[\"$\",\"code\",null,{\"children\":\"my-project-test\"}],\". This is how my \",[\"$\",\"code\",null,{\"children\":\"package.yaml\"}],\" looks like:\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"$e\"}]}],\"\\n\",[\"$\",\"ol\",null,{\"start\":\"2\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"To install the dependency, run \",[\"$\",\"code\",null,{\"children\":\"stack test\"}],\". If the installation goes well, you should see the following message \",[\"$\",\"code\",null,{\"children\":\"Test suite not yet implemented\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"$La\",null,{\"src\":{\"src\":\"/_next/static/media/stack_test_1.ff44caa8.png\",\"height\":873,\"width\":1932,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAAAAACWpiEsAAAALElEQVR42mOIDrVTkJGTl2OIi/Fw0JKRkGaIiQsPcHd2MGcI9HHWU1ZTVQYAg/oHQi45a10AAAAASUVORK5CYII=\",\"blurWidth\":8,\"blurHeight\":4},\"alt\":\"Test suite not implemented\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"If you go to the actual test file in \",[\"$\",\"code\",null,{\"children\":\"test/Spec.hs\"}],\" you can see that there indeed are no tests. We need to somehow tell stack to look for tests in our \",[\"$\",\"code\",null,{\"children\":\"src\"}],\" files instead.\"]}],\"\\n\",[\"$\",\"ol\",null,{\"start\":\"3\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"To do that, clear the contents of \",[\"$\",\"code\",null,{\"children\":\"test/Spec.hs\"}],\" file and replace it with this:\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"import Test.DocTest\\n\\nmain = doctest [\\\"-isrc\\\", \\\"src/Math.hs\\\"]\\n\"}]}],\"\\n\",[\"$\",\"ol\",null,{\"start\":\"4\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Now, if you run \",[\"$\",\"code\",null,{\"children\":\"stack test\"}],\" it will run the 2 tests we wrote earlier. That's it, we are done!\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"$La\",null,{\"src\":{\"src\":\"/_next/static/media/stack_test_2.ece830df.png\",\"height\":1142,\"width\":1930,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAAAAABd+vKJAAAANUlEQVR42mOIi/awtDHT12SIDbc1khYVk2CIjwv0tTcx0meIiAr18/FxM2cI8XOzdLA3kAQA4bkKCP5R0rEAAAAASUVORK5CYII=\",\"blurWidth\":8,\"blurHeight\":5},\"alt\":\"Tests pass successfully\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"When you add more modules, simply add them to this list \",[\"$\",\"code\",null,{\"children\":\"[\\\"-isrc\\\", \\\"src/Math.hs\\\"]\"}],\" in \",[\"$\",\"code\",null,{\"children\":\"test/Spec.hs\"}],\" to make \",[\"$\",\"code\",null,{\"children\":\"doctest\"}],\" look for tests in them.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Note\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This was my setup while writing this:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"MacOS \",[\"$\",\"code\",null,{\"children\":\"10.15.3\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Haskell Stack \",[\"$\",\"code\",null,{\"children\":\"2.1.3\"}]]}],\"\\n\"]}]]}]]}],null],\"segment\":\"__PAGE__\"},\"styles\":[]}],\"segment\":\"how-to-test-in-haskell-using-comments\"},\"styles\":[]}],\"segment\":\"posts\"},\"styles\":[]}]}],[\"$\",\"footer\",null,{\"className\":\"flex mt-1 justify-center items-center text-xs gap-x-1 \",\"children\":[[\"$\",\"span\",null,{\"children\":\"#9675b9e\\n\"}],[\"$\",\"span\",null,{\"className\":\"text-gray-300 dark:text-gray-700\",\"children\":\"|\"}],[\"$\",\"span\",null,{\"children\":\"Last Updated: 15 July 2021\"}],[\"$\",\"span\",null,{\"className\":\"text-gray-300  dark:text-gray-700\",\"children\":\"|\"}],[\"$\",\"span\",null,{\"children\":[\"© \",2023]}]]}]]}]}]}]]}],null]}]]\n"])</script><script>self.__next_f.push([1,"5:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"How to test in Haskell using comments? | Waqas Ali\"}],[\"$\",\"meta\",\"2\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}],[\"$\",\"link\",\"4\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png?98e0ab4deecdb1ce\",\"type\":\"image/png\",\"sizes\":\"180x180\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n"])</script></body></html>